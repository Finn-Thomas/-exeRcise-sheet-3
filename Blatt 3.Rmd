---
title: "Exercise #3"
subtitle: "Fortgeschrittene Statistische Software für NF"
author: "Finn Liebig (12402643)"
date: "`r Sys.Date()`"
output: distill::distill_article
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

Distill is a publication format for scientific and technical writing, native to the web.

Learn more about using Distill for R Markdown at <https://rstudio.github.io/distill>.

```{r}
library(tidyverse)
library(kableExtra)
```

## 1)

### d)

**Vorteile**

-   *Versionskontrolle*: Mithilfe von Git lässt sich die Bearbeitungshistorie des Dokuments zurückverfolgen. Damit ist es nicht nur möglich Back-up Dateien zu erstellen, sondern es ist möglich auf einzelne Arbeitsschritte sprich Änderungen zuzugreifen. Das erleichtert u.a. eventuelle Fehlerbehebungen und stellt eine weitere Sicherheitsvorkehrung beim Speichern des Dokuments dar.

-   *Reproduzierbarkeit*: Dadurch, dass das Repository geteilt werden kann, ist es möglich, dass Dritte die vorgenommenen Bearbeitungsschritte in ihrem Projekt leichter nachvollziehen können und bei Bedarf auch reproduzieren können. Das fördert den wissenschaftlichen Austausch im allgemeinen ebenso wie die Kontrolle und Verbesserung bei wissenschaftlicher Arbeiten.

**Nachteile**

-   *Arbeit mit der Befehlszeile*: Git selbst besitzt kein ordentliches IDE. Stattdessen muss ein Großteil der Befehle immer über die Befehlszeile eingegeben werden. Das kann umständlich und für Anfänger ungeeignet sein. Einige IDEs wie R Studio besitzen integrierte IDEs, diese bilden allerdings nur bedingt die Funktionen von Git ab.

-   *Leistung*: Besonders große Projekte mit vielen Dateien und Datenverzweigungen können bei Git Leistungsprobleme hervorrufen. Gerade bei älteren Computern macht sich das dann in der allgemeinen Performance der aktiven Programme zu bemerken und kann eventuell zu Abstürzen führen. Des weiteren kann Git nicht im Hintergrund laufen, was ebenfalls mehr Arbeitsspeicher erfordern kann.

## 3)

```{r}
data_23 <- read.csv("data/vornamen-muenchen-2023.csv")
data_22 <- read.csv("data/open_data_portal_2022.csv")
```

### b)

```{r}
data_23$Anzahl <- as.numeric(data_23$Anzahl)
data_22$Anzahl <- as.numeric(data_22$Anzahl)
```

Die Variable "Anzahl" ist nicht numerisch, da alle Namen welche maximal vier mal auftreten nicht exakt, sondern mit dem Eintrag/Wert "4 oder weniger" eingetragen werden. Da hier allerdings Buchstaben und keine reinen Zahlensymbole vorkommen, wird diese von R als String aufgefasst. Bei der Umwandlung in numerische Werten, können diese dann nicht umgewandelt werden, was bei den entsprechenden Namen mit NA gekennzeichnet wird.

Um dies zu beheben, gibt es verschiedene Möglichkeiten. Beispielweise könnten alle Spalten mit dem Wert NA entfernt werden. Ich halte es aber für sinnvoller, als Approximation alle NAs durch den Wert 2,5 zu ersetzen. Unter der Annahme, dass genauso viele Namen einfach, zweifach, dreifach und vierfach vorkommen (Namen die nullfach vorkommen, sollten gar nicht in der Liste erscheinen), stellt dies sowohl das arithmetische Mittel als auch den Median eines beliebigen Namens dieser Kategorie dar.

```{r}
data_22 <- data_22 %>% mutate(Anzahl = replace_na(Anzahl, 2.5))
data_23 <- data_23 %>% mutate(Anzahl = replace_na(Anzahl, 2.5))
```

Die Konsequenz dieser Approximation erfolgt trivial. Die Aussagekraft steht und fällt mit der Annahme. Ohne weitere Informationen kann sich diese als grundlegend richtig oder falsch erweisen, was entsprechende Ergebnisse mit dieser Annahme von den tatsächlichen Werten abweichen lassen kann.

### c)

```{r}
sum(data_22$Anzahl)
sum(data_23$Anzahl)
```

Im Jahr 2022 wurden mehr Kinder geboren als im Jahr 2023.

### d)

```{r}
data_22 <- data_22 %>% mutate(year = 2022)
data_23 <- data_23 %>% mutate(year = 2023)
```

### e)

```{r}
data_comp <- bind_rows(data_22, data_23)
```

### f)

```{r}
data_comp_table <- data_comp %>%
  group_by(Vorname) %>%
  summarize(Total = sum(Anzahl, na.rm = TRUE)) %>%
  arrange(desc(Total)) %>% slice_head(n=10)
kable(data_comp_table, caption = "Die 10 beliebtesten Namen in München der Jahre 2022/23 kombiniert")
```

## 4)

### b)

```{r}
data_malaria <- read.csv("data/Malaria deaths - IHME (2016).csv")
```

### c)

Dataset Name: Malaria deaths - IHME (2016)

Link: [https://github.com/owid/owid-datasets/tree/master/datasets/Malaria%20deaths%20-%20IHME%20(2016)](https://github.com/owid/owid-datasets/tree/master/datasets/Malaria%20deaths%20-%20IHME%20(2016)){.uri}

### d)

**Frage: Wie verhält sich der Trend bei Malariatoten (absolut) in zentralafrikanischen Ländern (pro Land) im Laufe der Jahre von 1990- 2016?**

### e)

Unter zentral-/mittelafrikanischen Ländern werden laut der UN geführt:

-   Angola

-   Cameroon

-   Central African Republic

-   Chad

-   Congo

-   Democratic Republic of the Congo

-   Equatorial Guinea

-   Gabon

-   Sao Tome and Principe

Quelle: <https://unstats.un.org/unsd/methodology/m49/>

```{r}
data_malaria_mid_afr <- data_malaria %>% filter(Entity %in% c("Angola", "Gabon", "Cameroon", "Central African Republic", "Chad", "Congo", "Democratic Republic of the Congo", "Equatorial Guinea", "Sao Tome and Principe"))
```

```{r}
data_malaria_mid_afr_vgl <- data_malaria_mid_afr %>% group_by(Entity) %>%
  mutate(Aenderung = Deaths.from.malaria..IHME.2016. - lag(Deaths.from.malaria..IHME.2016.))
kable(data_malaria_mid_afr_vgl)
```

```{r}
data_malaria_angola <- data_malaria_mid_afr_vgl %>%
filter(Entity == "Angola")
data_malaria_gabon <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Gabon")
data_malaria_cameroon <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Cameroon")
data_malaria_ctr_rep <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Central African Republic")
data_malaria_chad <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Chad")
data_malaria_congo <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Congo")
data_malaria_rep_congo <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Democratic Republic of the Congo")
data_malaria_rep_eq_guinea <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Equatorial Guinea")
data_malaria_rep_sao_tome <- data_malaria_mid_afr_vgl %>%
group_by(Entity) %>% filter(Entity == "Sao Tome and Principe")
```

```{r}
library(gridExtra)
plot_1 <- ggplot(data = data_malaria_angola,
       aes(x = Year,
           y = Aenderung))+
  geom_point() +
  geom_line()+
  labs(title = "Angola",
       x = "Jahr",
       y = "Änderung"
       )
plot_2 <- ggplot(data = data_malaria_gabon,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Gabon",
       x = "Jahr",
       y = "Änderung"
       )
plot_3 <- ggplot(data = data_malaria_cameroon,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Cameroon",
       x = "Jahr",
       y = "Änderung"
       )
plot_4 <- ggplot(data = data_malaria_ctr_rep,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Central African Republic",
       x = "Jahr",
       y = "Änderung"
       )
plot_5 <- ggplot(data = data_malaria_chad,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Chad",
       x = "Jahr",
       y = "Änderung"
       )
plot_6 <- ggplot(data = data_malaria_congo,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Congo",
       x = "Jahr",
       y = "Änderung"
       )
plot_7 <- ggplot(data = data_malaria_rep_congo,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Democratic Republic Congo",
       x = "Jahr",
       y = "Änderung"
       )
plot_8 <- ggplot(data = data_malaria_rep_eq_guinea,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Equitorial Guinea",
       x = "Jahr",
       y = "Änderung"
       )
plot_9 <- ggplot(data = data_malaria_rep_sao_tome,
       aes(x = Year,
           y = Aenderung))+
  geom_point()+
  geom_line()+
  labs(title = "Sao Tome and Principe",
       x = "Jahr",
       y = "Änderung"
       )
grid.arrange(plot_1, plot_2, plot_3, plot_4, plot_5, plot_6, plot_7, plot_8, plot_9, ncol = 3)

```

Wie sich auf den Graphen der jeweiligen Länder leicht erkennen lässt, scheinen 4 der 9 Staaten beinahe keinen Trend bei der absoluten Änderung der Anzahl der Malariatoten im Laufe der Jahre aufzuzeigen. Der Plot in f) verdeutlicht dies. Er zeigt außerdem, dass diese 4 Länder generell fast keine Malariatoten haben. Besonders Angola, Gabon und Kamerun scheinen bis ins Jahr 2005 einen (starken) positiven Trend bei der Änderungsrate aufzuweisen. Bis ungefähr 2011 ist die Änderungsrate negativ. Danach scheint sie sich zu stabilisieren und bleibt weitestgehen konstant. Dazu habe eine Anmerkung: Diese Länder besitzen eine hohe Geburtenrate und damit auch eine stetig wachsende Bevölkerung. Um sinnvoll analysieren zu können, reichen absolute Werte allerdings nicht aus. Die hohe, aber seit einigen Jahren konstante Anzahl an Toten in Kamerun kann einen negativen der relativen Sterberate implizieren, schließlich wächst die Bevölkerung an, die Anzahl der Toten bleibt allerdings gleich. Dazu müssten allerdings weitere Datensätze zur Verfügung stehen. Zur Demokratischen Republik Kongo existieren leider keine Daten.

## f)

```{r}
ggplot(data = data_malaria_mid_afr,
       aes(x = Year,
           y = Deaths.from.malaria..IHME.2016.,
       color = Entity) )+
  geom_point() +
geom_line() + 
  labs(title = "Malaria-Deaths in Central African Countries (2000-2016)",
       x = "Year",
       y = "Absolut Deaths from Malaria (IHME 2016)",
       color = "Country") +
  theme_minimal() 

```
